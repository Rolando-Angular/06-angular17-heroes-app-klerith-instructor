import{A,B as Oe,C as Ge,D as qe,E as ze,F as Ke,G as Je,H as Qe,I as We,J as Xe,K as Ye,L as U,M as Ze,N as et,O as ae,P as tt,Q as it,R as rt,S as ot,T as nt,U as at,V as mt,W as st,a as X,b as y,c as De,d as Y,e as Z,f as j,g as ee,h as te,i as Fe,j as Te,k as I,l as Le,m as $e,n as Ne,o as Be,p as je,q as Ve,r as ie,s as Re,t as Ae,u as V,v as re,w as R,x as oe,y as Ue,z as ne}from"./chunk-CVHXNFFR.js";import{a as we,g as Q,h as ke,i as B,j as W,k as ue,l as He,m as Pe}from"./chunk-IS537OCW.js";import"./chunk-6XXA7HXI.js";import{$ as K,A as ce,Ac as Me,Bb as E,C as pe,Cc as xe,Dc as Ee,Eb as d,Gb as w,Nb as $,Ob as n,Pb as c,Qb as C,T as q,Ta as F,Tb as ye,U as x,Ub as de,Vb as P,Wa as m,Wb as N,Xa as l,Xb as Ie,_ as _e,a as z,da as Se,j as k,ja as h,ka as J,ma as be,mb as T,n as le,ob as p,r as Ce,sa as g,ta as v,tb as L,ub as _,vb as S,wb as b,xb as r,yb as i,zb as s}from"./chunk-OZ3NPK3Q.js";var bt=()=>({width:"250px"});function yt(t,f){if(t&1){let e=E();r(0,"mat-list-item",10),d("click",function(){g(e),w();let a=$(2);return v(a.toggle())}),r(1,"mat-icon",11),n(2),i(),n(3),i()}if(t&2){let e=f.$implicit;p("routerLink",e.url),m(2),c(e.icon),m(),C("",e.label," ")}}var ct=(()=>{class t{constructor(e,o){this.authService=e,this.router=o,this.sidebarItems=[{label:"Listado",icon:"label",url:"./list"},{label:"A\xF1adir",icon:"add",url:"./new-hero"},{label:"Buscar",icon:"search",url:"./search"}]}get user(){return this.authService.currentUser}onLogout(){this.authService.logout(),this.router.navigate(["/auth/login"])}static{this.\u0275fac=function(o){return new(o||t)(l(Pe),l(B))}}static{this.\u0275cmp=h({type:t,selectors:[["app-layout-page"]],decls:24,vars:3,consts:[["sidenav",""],["fullscreen",""],["mode","push",3,"ngStyle"],[1,"spacer"],["mat-icon-button","",3,"clicK"],[3,"routerLink"],["color","primary"],["mat-icon-button","",3,"click"],["mat-button","",3,"click"],[1,"container","p-2"],[3,"click","routerLink"],["matListItemIcon",""]],template:function(o,a){if(o&1){let u=E();r(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"mat-toolbar")(4,"span"),n(5,"Men\xFA"),i(),s(6,"span",3),r(7,"button",4),d("clicK",function(){g(u);let G=$(2);return v(G.toggle())}),r(8,"mat-icon"),n(9,"menu"),i()()(),r(10,"mat-nav-list"),S(11,yt,4,3,"mat-list-item",5,_),i()(),r(13,"mat-toolbar",6)(14,"button",7),d("click",function(){g(u);let G=$(2);return v(G.toggle())}),r(15,"mat-icon"),n(16,"menu"),i()(),s(17,"span",3),r(18,"span"),n(19),i(),r(20,"button",8),d("click",function(){return g(u),v(a.onLogout())}),n(21," Logout "),i()(),r(22,"div",9),s(23,"router-outlet"),i()()}o&2&&(m(),p("ngStyle",ye(2,bt)),m(10),b(a.sidebarItems),m(8),c(a.user==null?null:a.user.email))},dependencies:[Me,ke,W,y,De,j,tt,ae,Ze,ot,nt,mt]})}}return t})();var fe=function(t){return t.DCComics="DC Comics",t.MarvelComics="Marvel Comics",t}(fe||{});var pt=(()=>{class t{constructor(e,o){this.dialogRef=e,this.data=o}onNoClick(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static{this.\u0275fac=function(o){return new(o||t)(l(qe),l(ze))}}static{this.\u0275cmp=h({type:t,selectors:[["app-confirm-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],[1,"spacer"],["mat-button","","color","primary",3,"click"]],template:function(o,a){o&1&&(r(0,"h2",0),n(1,"\xBFEst\xE1 seguro?"),i(),r(2,"mat-dialog-content")(3,"p"),n(4),i()(),r(5,"mat-dialog-actions")(6,"button",1),d("click",function(){return a.onNoClick()}),n(7,"No Thanks"),i(),s(8,"span",2),r(9,"button",3),d("click",function(){return a.onConfirm()}),n(10,"Ok"),i()()),o&2&&(m(4),C("Este proceso no es reversible, est\xE1 a punto de eliminar a ",a.data.superhero,""))},dependencies:[y,Je,We,Qe]})}}return t})();var H=(()=>{class t{constructor(e){this.httpClient=e,this.baseUrl=He.baseUrl}getHeroes(){return this.httpClient.get(`${this.baseUrl}/heroes`)}getHeroeById(e){return this.httpClient.get(`${this.baseUrl}/heroes/${e}`).pipe(pe(()=>le(null)))}getSuggestions(e){return this.httpClient.get(`${this.baseUrl}/heroes?superhero_like=${e}&_limit=6`)}addHero(e){return this.httpClient.post(`${this.baseUrl}/heroes`,e)}updateHero(e){return this.httpClient.patch(`${this.baseUrl}/heroes/${e.id}`,e)}deleteHeroById(e){return this.httpClient.delete(`${this.baseUrl}/heroes/${e}`).pipe(Ce(o=>!0),pe(o=>le(!1)))}static{this.\u0275fac=function(o){return new(o||t)(Se(we))}}static{this.\u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var O=(()=>{class t{transform(e){return!e.id&&!e.alt_img?"assets/no-image.png":e.alt_img?e.alt_img:`assets/heroes/${e.id}.jpg`}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275pipe=be({name:"heroImage",type:t,pure:!0})}}return t})();function kt(t,f){if(t&1&&(r(0,"mat-option",10),n(1),i()),t&2){let e=f.$implicit;p("value",e.id),m(),c(e.desc)}}function Ht(t,f){if(t&1){let e=E();r(0,"button",16),d("click",function(){g(e);let a=w();return v(a.onDeleteHero())}),n(1," Borrar "),i()}}var ve=(()=>{class t{get currentHero(){return this.heroForm.value}constructor(e,o,a,u,D){this.heroesService=e,this.activatedRoute=o,this.router=a,this.snackbar=u,this.dialog=D,this.heroForm=new Te({id:new I(""),superhero:new I("",{nonNullable:!0}),publisher:new I(fe.DCComics),alter_ego:new I(""),first_appearance:new I(""),characters:new I(""),alt_img:new I("")}),this.publishers=[{id:"DC Comics",desc:"DC - Comics"},{id:"Marvel Comics",desc:"Marvel - Comics"}],this.destroy$=new k}ngOnInit(){this.router.url.includes("edit")&&this.activatedRoute.params.pipe(q(({id:e})=>this.heroesService.getHeroeById(e))).subscribe(e=>{if(!e){this.router.navigateByUrl("/");return}this.heroForm.reset(z({},e))})}onSubmit(){if(!this.heroForm.invalid){if(this.currentHero.id){this.heroesService.updateHero(this.currentHero).pipe(x(this.destroy$)).subscribe(e=>{this.showSnakcbar(`${e.superhero} updated!`)});return}this.heroesService.addHero(this.currentHero).pipe(x(this.destroy$)).subscribe(e=>{this.showSnakcbar(`${e.superhero} created!`),this.router.navigate(["/heroes/edit",e.id])})}}showSnakcbar(e){this.snackbar.open(e,"done",{duration:2500})}onDeleteHero(){if(!this.currentHero.id)throw Error("Hero id is required");this.dialog.open(pt,{data:this.heroForm.value}).afterClosed().pipe(ce(o=>o),q(()=>this.heroesService.deleteHeroById(this.currentHero.id)),ce(o=>o)).subscribe(()=>this.router.navigate(["/heroes"]))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(l(H),l(Q),l(B),l(at),l(Ke))}}static{this.\u0275cmp=h({type:t,selectors:[["app-new-page"]],decls:45,vars:6,consts:[[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"grid",3,"ngSubmit","formGroup"],["matInput","","type","text","required","","formControlName","superhero"],["matInput","","type","text","required","","formControlName","alter_ego"],[1,"col-12"],["matInput","","type","text","required","","formControlName","first_appearance"],["matInput","","type","text","required","","formControlName","characters"],["required","","formControlName","publisher"],[3,"value"],["matInput","","type","text","formControlName","alt_img"],[1,"flex","justify-content-between"],["mat-flat-button","","color","warn"],["mat-flat-button","","color","primary",3,"click"],["alt","imagen del h\xE9roe","mat-card-image","",3,"src"],["mat-flat-button","","color","warn",3,"click"]],template:function(o,a){o&1&&(r(0,"h1"),n(1),i(),s(2,"mat-divider",0),r(3,"div",1)(4,"div",2)(5,"mat-card")(6,"mat-card-content")(7,"form",3),d("ngSubmit",function(){return a.onSubmit()}),r(8,"mat-form-field",2)(9,"mat-label"),n(10,"Super h\xE9roe"),i(),s(11,"input",4),i(),r(12,"mat-form-field",2)(13,"mat-label"),n(14,"Alter ego"),i(),s(15,"input",5),i(),r(16,"mat-form-field",6)(17,"mat-label"),n(18,"Primera aparici\xF3n"),i(),s(19,"input",7),i(),r(20,"mat-form-field",6)(21,"mat-label"),n(22,"Personajes"),i(),s(23,"input",8),i(),r(24,"mat-form-field",6)(25,"mat-label"),n(26,"Creador"),i(),r(27,"mat-select",9),S(28,kt,2,2,"mat-option",10,_),i()(),r(30,"mat-form-field",6)(31,"mat-label"),n(32,"Alternative Image"),i(),s(33,"input",11),i()(),r(34,"div",12),T(35,Ht,2,0,"button",13),s(36,"span"),r(37,"button",14),d("click",function(){return a.onSubmit()}),r(38,"mat-icon"),n(39,"save"),i(),n(40," Guardar "),i()()()()(),r(41,"div",2)(42,"mat-card"),s(43,"img",15),P(44,"heroImage"),i()()()),o&2&&(m(),C(" ",a.currentHero.id?"Editar":"Agregar",` h\xE9roe
`),m(6),p("formGroup",a.heroForm),m(21),b(a.publishers),m(7),L(35,a.currentHero.id?35:-1),m(8),p("src",N(44,4,a.currentHero),F))},dependencies:[X,y,V,R,A,Z,Y,j,ie,U,rt,Le,ee,te,Fe,je,Ne,Be,O]})}}return t})();function Pt(t,f){if(t&1&&(r(0,"mat-option",4),n(1),i()),t&2){let e=f.$implicit;p("value",e),m(),c(e.superhero)}}function Dt(t,f){if(t&1&&(r(0,"mat-option",5),n(1),i()),t&2){let e=w();m(),C(" No se encontro nada con el termino ",e.searchInput.value," ")}}var ht=(()=>{class t{constructor(e){this.heroesService=e,this.searchInput=new I(""),this.heroes=[],this.destroy$=new k}searchHero(){let e=this.searchInput.value??"";this.heroesService.getSuggestions(e).pipe(x(this.destroy$)).subscribe(o=>{this.heroes=[...o]})}onSelectedOption(e){this.selectedHero=e.option.value??void 0,this.selectedHero&&this.searchInput.setValue(this.selectedHero.superhero)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(l(H))}}static{this.\u0275cmp=h({type:t,selectors:[["app-search-page"]],decls:13,vars:3,consts:[["auto","matAutocomplete"],[1,"flex","flex-column","p-2"],["type","text","matInput","",3,"input","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],[3,"value"],["value",""]],template:function(o,a){if(o&1){let u=E();r(0,"div",1)(1,"h3"),n(2,"Buscador"),i(),r(3,"mat-form-field")(4,"mat-label"),n(5,"Buscador de h\xE9roes"),i(),r(6,"input",2),d("input",function(){return g(u),v(a.searchHero())}),i(),r(7,"mat-autocomplete",3,0),d("optionSelected",function(G){return g(u),v(a.onSelectedOption(G))}),S(9,Pt,2,2,"mat-option",4,_),T(11,Dt,2,1,"mat-option",5),i()(),s(12,"br"),i()}if(o&2){let u=$(8);m(6),p("formControl",a.searchInput)("matAutocomplete",u),m(3),b(a.heroes),m(2),L(11,!a.heroes.length&&a.searchInput.value.length>0?11:-1)}},dependencies:[Re,X,Ae,Z,Y,ie,ee,te,$e]})}}return t})();var Ft=t=>["/heroes/edit",t],Tt=t=>["/heroes",t];function Lt(t,f){if(t&1&&(r(0,"mat-chip"),n(1),i()),t&2){let e=f.$implicit;m(),C(" ",e," ")}}var ft=(()=>{class t{ngOnInit(){if(!this.hero)throw new Error("Hero property is required")}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=h({type:t,selectors:[["heroes-hero-card"]],inputs:{hero:"hero"},decls:31,vars:17,consts:[["mat-card-image","","alt","hero.superhero",3,"src"],[1,"mt-2"],["mat-button","","mat-raise","","color","primary",3,"routerLink"],[1,"spacer"],["mat-button","","mat-raise","",3,"routerLink"]],template:function(o,a){o&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),n(3),i(),r(4,"mat-card-subtitle"),n(5),i()(),s(6,"img",0),P(7,"heroImage"),r(8,"mat-card-content",1)(9,"h4"),n(10),i(),r(11,"p")(12,"strong"),n(13,"Primera aparici\xF3n"),i(),n(14),s(15,"br"),r(16,"mat-chip-listbox"),S(17,Lt,2,1,"mat-chip",null,_),P(19,"slice"),i()()(),s(20,"mat-divider"),r(21,"mat-card-actions")(22,"button",2)(23,"mat-icon"),n(24,"edit"),i(),n(25," Editar "),i(),s(26,"span",3),r(27,"button",4)(28,"mat-icon"),n(29,"more_horiz"),i(),n(30," M\xE1s "),i()()()),o&2&&(m(3),c(a.hero.superhero),m(2),c(a.hero.alter_ego),m(),p("src",N(7,7,a.hero),F),m(4),c(a.hero.publisher),m(4),C(" ",a.hero.first_appearance," "),m(3),b(Ie(19,9,a.hero.characters.split(","),0,3)),m(5),p("routerLink",de(13,Ft,a.hero.id)),m(5),p("routerLink",de(15,Tt,a.hero.id)))},dependencies:[W,y,V,Ue,R,ne,A,oe,re,Oe,Ge,j,U,xe,O]})}}return t})();function Nt(t,f){if(t&1&&(r(0,"div",1),s(1,"heroes-hero-card",2),i()),t&2){let e=f.$implicit;m(),p("hero",e)}}var gt=(()=>{class t{constructor(e){this.heroesService=e,this.destroy$=new k,this.heroes=[]}ngOnInit(){this.heroesService.getHeroes().pipe(x(this.destroy$)).subscribe(e=>this.heroes=[...e])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(l(H))}}static{this.\u0275cmp=h({type:t,selectors:[["app-list-page"]],decls:6,vars:0,consts:[[1,"grid","bm-8","pt-2"],[1,"col-12","sm:col-4","md:col-3","xl:col-2"],[3,"hero"]],template:function(o,a){o&1&&(r(0,"h1"),n(1,"Listado de H\xE9roes"),i(),s(2,"mat-divider"),r(3,"div",0),S(4,Nt,2,1,"div",1,_),i()),o&2&&(m(4),b(a.heroes))},dependencies:[U,ft]})}}return t})();function Bt(t,f){if(t&1){let e=E();r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),n(4),i(),r(5,"mat-card-subtitle"),n(6),i()(),s(7,"img",2),P(8,"heroImage"),i(),r(9,"mat-card",1)(10,"mat-card-header")(11,"mat-card-title"),n(12,"Informaci\xF3n del heroe"),i(),r(13,"mat-card-subtitle"),n(14),i()(),r(15,"mat-card-content")(16,"mat-list")(17,"mat-list-item"),n(18),i(),r(19,"mat-list-item"),n(20),i(),r(21,"mat-list-item"),n(22),i(),r(23,"mat-list-item"),n(24),i()(),r(25,"button",3),d("click",function(){g(e);let a=w();return v(a.goBack())}),n(26," Regresar "),i()()()()}if(t&2){let e=w();m(4),c(e.hero.alter_ego),m(2),c(e.hero.superhero),m(),p("src",N(8,9,e.hero),F)("alt",e.hero.superhero),m(7),c(e.hero.superhero),m(4),c(e.hero.first_appearance),m(2),c(e.hero.characters),m(2),c(e.hero.publisher),m(2),c(e.hero.alter_ego)}}function jt(t,f){t&1&&(r(0,"mat-grid-list",4)(1,"mat-grid-tile"),s(2,"mat-spinner"),i()())}var vt=(()=>{class t{constructor(e,o,a){this.heroesService=e,this.activatedRoute=o,this.router=a,this.destroy$=new k}ngOnInit(){this.activatedRoute.params.pipe(q(({id:e})=>this.heroesService.getHeroeById(e)),x(this.destroy$)).subscribe(e=>{if(!e)return this.router.navigate(["heroes","list"]);this.hero=z({},e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}goBack(){this.router.navigateByUrl("/heroes/list")}static{this.\u0275fac=function(o){return new(o||t)(l(H),l(Q),l(B))}}static{this.\u0275cmp=h({type:t,selectors:[["app-hero-page"]],decls:2,vars:1,consts:[[1,"grid","p-2"],[1,"col-12","sm:col-6"],["mat-card-image","",3,"src","alt"],["mat-button","","color","warn",3,"click"],["cols","1"]],template:function(o,a){o&1&&T(0,Bt,27,11,"div",0)(1,jt,3,0),o&2&&L(0,a.hero?0:1)},dependencies:[y,V,R,ne,A,oe,re,Ye,Xe,et,ae,it,O]})}}return t})();var Vt=[{path:"",component:ct,children:[{path:"new-hero",component:ve},{path:"search",component:ht},{path:"edit/:id",component:ve},{path:"list",component:gt},{path:":id",component:vt},{path:"**",redirectTo:"list"}]}],Ct=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=J({type:t})}static{this.\u0275inj=K({imports:[ue.forChild(Vt),ue]})}}return t})();var Oi=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=J({type:t})}static{this.\u0275inj=K({imports:[Ee,Ct,st,Ve]})}}return t})();export{Oi as HeroesModule};
